(function(e){function t(t){for(var n,a,i=t[0],c=t[1],u=t[2],l=0,d=[];l<i.length;l++)a=i[l],Object.prototype.hasOwnProperty.call(o,a)&&o[a]&&d.push(o[a][0]),o[a]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(e[n]=c[n]);f&&f(t);while(d.length)d.shift()();return s.push.apply(s,u||[]),r()}function r(){for(var e,t=0;t<s.length;t++){for(var r=s[t],n=!0,a=1;a<r.length;a++){var i=r[a];0!==o[i]&&(n=!1)}n&&(s.splice(t--,1),e=c(c.s=r[0]))}return e}var n={},a={app:0},o={app:0},s=[];function i(e){return c.p+"js/"+({}[e]||e)+"."+{"chunk-955437fc":"c844574e"}[e]+".js"}function c(t){if(n[t])return n[t].exports;var r=n[t]={i:t,l:!1,exports:{}};return e[t].call(r.exports,r,r.exports,c),r.l=!0,r.exports}c.e=function(e){var t=[],r={"chunk-955437fc":1};a[e]?t.push(a[e]):0!==a[e]&&r[e]&&t.push(a[e]=new Promise((function(t,r){for(var n="css/"+({}[e]||e)+"."+{"chunk-955437fc":"2d362fc0"}[e]+".css",o=c.p+n,s=document.getElementsByTagName("link"),i=0;i<s.length;i++){var u=s[i],l=u.getAttribute("data-href")||u.getAttribute("href");if("stylesheet"===u.rel&&(l===n||l===o))return t()}var d=document.getElementsByTagName("style");for(i=0;i<d.length;i++){u=d[i],l=u.getAttribute("data-href");if(l===n||l===o)return t()}var f=document.createElement("link");f.rel="stylesheet",f.type="text/css",f.onload=t,f.onerror=function(t){var n=t&&t.target&&t.target.src||o,s=new Error("Loading CSS chunk "+e+" failed.\n("+n+")");s.code="CSS_CHUNK_LOAD_FAILED",s.request=n,delete a[e],f.parentNode.removeChild(f),r(s)},f.href=o;var p=document.getElementsByTagName("head")[0];p.appendChild(f)})).then((function(){a[e]=0})));var n=o[e];if(0!==n)if(n)t.push(n[2]);else{var s=new Promise((function(t,r){n=o[e]=[t,r]}));t.push(n[2]=s);var u,l=document.createElement("script");l.charset="utf-8",l.timeout=120,c.nc&&l.setAttribute("nonce",c.nc),l.src=i(e);var d=new Error;u=function(t){l.onerror=l.onload=null,clearTimeout(f);var r=o[e];if(0!==r){if(r){var n=t&&("load"===t.type?"missing":t.type),a=t&&t.target&&t.target.src;d.message="Loading chunk "+e+" failed.\n("+n+": "+a+")",d.name="ChunkLoadError",d.type=n,d.request=a,r[1](d)}o[e]=void 0}};var f=setTimeout((function(){u({type:"timeout",target:l})}),12e4);l.onerror=l.onload=u,document.head.appendChild(l)}return Promise.all(t)},c.m=e,c.c=n,c.d=function(e,t,r){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(c.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)c.d(r,n,function(t){return e[t]}.bind(null,n));return r},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/vue_films-app/",c.oe=function(e){throw console.error(e),e};var u=window["webpackJsonp"]=window["webpackJsonp"]||[],l=u.push.bind(u);u.push=t,u=u.slice();for(var d=0;d<u.length;d++)t(u[d]);var f=l;s.push([0,"chunk-vendors"]),r()})({0:function(e,t,r){e.exports=r("56d7")},1766:function(e,t,r){},"1d38":function(e,t,r){},"26d2":function(e,t,r){"use strict";r("1d38")},"4c37":function(e,t,r){},"56d7":function(e,t,r){"use strict";r.r(t);r("e260"),r("e6cf"),r("cca6"),r("a79d");var n=r("2b0e"),a=r("487a"),o=r.n(a),s=r("f5af"),i=r.n(s),c=(r("e829"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"App"},[r("h1",{staticClass:"App__title"},[e._v("Popular Movies")]),r("Search",{on:{"handle-query":e.handleQuery}}),r("router-view",{attrs:{popular:e.popular,totalPages:e.totalPages,favoritesIds:e.favoritesIds},on:{"load-popular":e.loadPopular,"handle-favorite":e.handleFavorite}})],1)}),u=[],l=(r("99af"),r("4de4"),r("b64b"),r("2909")),d=(r("96cf"),r("1da1")),f=r("b04b"),p=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Search"},[r("div",{staticClass:"Search__container"},[r("input",{directives:[{name:"model",rawName:"v-model.lazy",value:e.query,expression:"query",modifiers:{lazy:!0}}],staticClass:"Search__input",attrs:{type:"text",placeholder:"🔍 Find what you want ;)"},domProps:{value:e.query},on:{change:function(t){e.query=t.target.value}}}),e.query.length?r("button",{staticClass:"Search__clean",on:{click:function(t){e.query=""}}},[e._v(" X ")]):e._e()])])},v=[],h={name:"Search",data:function(){return{query:""}},methods:{onChange:function(){this.$emit("handle-query",this.query)}},watch:{query:function(){this.onChange()}}},m=h,g=(r("9776"),r("2877")),b=Object(g["a"])(m,p,v,!1,null,"2195186e",null),_=b.exports,y={name:"App",data:function(){return{popular:[],page:1,query:"",totalPages:1,favoritesIds:[]}},methods:{handleQuery:function(e){this.query=e,e.length?this.loadByQuery():(this.reloadFromStart(),this.loadPopular())},loadByQuery:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r,n,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].getMoviesByQuery(e.query,e.page);case 2:if(r=t.sent,n=r.films,a=r.totalPages,e.reloadFromStart(),e.totalPages=+a,a){t.next=9;break}return t.abrupt("return");case 9:e.updateList(n);case 10:case"end":return t.stop()}}),t)})))()},loadPopular:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].getPopular(e.page);case 2:r=t.sent,e.updateList(r);case 4:case"end":return t.stop()}}),t)})))()},updateList:function(e){this.popular=[].concat(Object(l["a"])(this.popular),Object(l["a"])(e)),this.page+=1},reloadFromStart:function(){this.popular=[],this.page=1},handleFavorite:function(){this.favoritesIds=Object.keys(localStorage).filter((function(e){return"{"===localStorage.getItem(e)[0]}))}},components:{Search:_}},w=y,C=(r("5c0b"),Object(g["a"])(w,c,u,!1,null,null,null)),x=C.exports,P=(r("d3b7"),r("8c4f")),j=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Movies"},[e.favoritesIds.length?r("Favorites",{attrs:{favoritesIds:e.favoritesIds}}):e._e(),r("MoviesList",{attrs:{popular:e.popular,totalPages:e.totalPages,favoritesIds:e.favoritesIds},on:{"load-popular":e.loadPopular,"handle-favorite":e.handleFavorite}})],1)},O=[],k=(r("a9e3"),function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"MovieList"},[e.totalPages?r("ul",{staticClass:"MovieList__list"},[r("div",{directives:[{name:"infinite-scroll",rawName:"v-infinite-scroll",value:e.loadMore,expression:"loadMore"}],staticClass:"MovieList__loader",attrs:{"infinite-scroll-disabled":"busy","infinite-scroll-distance":"limit"}},e._l(e.popular,(function(t){return r("MovieCard",{key:t.id,attrs:{movie:t,genres:e.genresIndex,favoritesIds:e.favoritesIds},on:{"handle-favorite":e.handleFavorite}})})),1)]):r("p",{staticClass:"MovieList__message"},[e._v(" Don't was find anything by the query. Try another one!) ")])])}),I=[],S=(r("13d5"),r("b0c0"),r("ade3")),F=r("5530"),M=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("li",{staticClass:"Card",attrs:{"data-aos":"slide-up","data-aos-offset":"100","data-aos-easing":"ease-out","data-aos-duration":"2000"},on:{mouseenter:function(t){e.hover=!e.hover},mouseleave:function(t){e.hover=!e.hover}}},[r("Poster",{attrs:{favoritesIds:e.favoritesIds,movie:e.movie},on:{"handle-favorite":e.handleFavorite}}),r("div",{staticClass:"Card__body"},[r("h4",{staticClass:"Card__title"},[e._v(" "+e._s(e.movie.title)+" ")]),r("div",{directives:[{name:"show",rawName:"v-show",value:e.hover,expression:"hover"}],staticClass:"Card__hide-body"},[r("ul",{staticClass:"Card__genresList"},e._l(e.getGenres,(function(t){return r("li",{key:t,staticClass:"Card__genre"},[e._v(" "+e._s(t)+" ")])})),0),r("p",{staticClass:"Card__paragraph"},[e._v(" "+e._s(e.movie.overview)+" ")]),r("router-link",{staticClass:"Card__route-to-details",attrs:{to:e.takePath}},[e._v(" See details ")])],1)])],1)},q=[],A=(r("d81d"),r("e4bb")),E={name:"MovieCard",props:{movie:{type:Object,required:!0},genres:{type:Object,required:!0},favoritesIds:Array},data:function(){return{hover:!1}},methods:{handleFavorite:function(){this.$emit("handle-favorite")}},computed:{getGenres:function(){var e=this;return this.movie.genre_ids.map((function(t){return e.genres[t]}))},takePath:function(){return"/vue_films-app/details/".concat(this.movie.id)}},components:{Poster:A["a"]}},L=E,R=(r("f16c"),Object(g["a"])(L,M,q,!1,null,"428d55c2",null)),$=R.exports,N={name:"MoviesList",props:{popular:Array,totalPages:Number,favoritesIds:Array},data:function(){return{limit:20,busy:!1,genresIndex:{}}},methods:{loadMore:function(){this.busy=!0,this.$emit("load-popular"),this.busy=!1},prepareGenres:function(){var e=this;return Object(d["a"])(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,f["a"].genres();case 2:r=t.sent,e.genresIndex=r.reduce((function(e,t){return Object(F["a"])(Object(F["a"])({},e),{},Object(S["a"])({},t.id,t.name))}),{});case 4:case"end":return t.stop()}}),t)})))()},handleFavorite:function(){this.$emit("handle-favorite")}},created:function(){this.prepareGenres()},components:{MovieCard:$}},T=N,B=(r("c1bb"),Object(g["a"])(T,k,I,!1,null,"a0ced502",null)),Q=B.exports,D=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Favorites"},[r("h3",{staticClass:"Favorites__title"},[e._v(" Your favorites movies: ")]),r("ul",{staticClass:"Favorites__list"},e._l(e.localFavorites,(function(t){return r("li",{key:t.id,staticClass:"Favorites__item",style:{color:e.getColor(t.id)}},[e._v(" "+e._s(""+t.title)+" ")])})),0)])},G=[],J={name:"Favorites",props:{favoritesIds:Array},data:function(){return{collorCashe:{}}},methods:{getColor:function(e){var t=function(){return Math.floor(256*Math.random())},r=this.collorCashe[e]||(this.collorCashe[e]="rgb(".concat(t(),", ").concat(t(),", ").concat(t(),")"));return r}},computed:{localFavorites:function(){return this.favoritesIds.map((function(e){return JSON.parse(localStorage.getItem(e))}))}}},Y=J,z=(r("dab2"),Object(g["a"])(Y,D,G,!1,null,"8f20d7b6",null)),H=z.exports,K={name:"Movies",props:{popular:Array,totalPages:Number,favoritesIds:Array},methods:{loadPopular:function(){this.$emit("load-popular")},handleFavorite:function(){this.$emit("handle-favorite")}},mounted:function(){localStorage.length&&this.handleFavorite()},components:{MoviesList:Q,Favorites:H}},U=K,X=(r("74de"),Object(g["a"])(U,j,O,!1,null,"63efc3fc",null)),V=X.exports;n["a"].use(P["a"]);var W=new P["a"]({mode:"history",routes:[{path:"/vue_films-app",name:"Movies",component:V},{path:"/vue_films-app/details/:id",name:"Details",component:function(){return r.e("chunk-955437fc").then(r.bind(null,"9f52"))}}]});n["a"].config.productionTip=!1,n["a"].use(o.a),n["a"].use(i.a),new n["a"]({router:W,created:function(){i.a.init()},render:function(e){return e(x)}}).$mount("#app")},"5c0b":function(e,t,r){"use strict";r("9c0c")},"74de":function(e,t,r){"use strict";r("1766")},9395:function(e,t,r){},9776:function(e,t,r){"use strict";r("4c37")},"9c0c":function(e,t,r){},b04b:function(e,t,r){"use strict";r("99af"),r("d3b7"),r("96cf");var n=r("1da1"),a="d8ac5c243091006ca12b7a98c4cbc3dd",o="https://api.themoviedb.org/3";function s(e){return i.apply(this,arguments)}function i(){return i=Object(n["a"])(regeneratorRuntime.mark((function e(t){var r,n,s=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return r=s.length>1&&void 0!==s[1]?s[1]:"",e.next=3,fetch("".concat(o).concat(t,"?api_key=").concat(a).concat(r));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)}))),i.apply(this,arguments)}var c={getPopular:function(){var e=arguments;return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n,a,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=e.length>0&&void 0!==e[0]?e[0]:1,t.next=3,s("/movie/popular","&page=".concat(r));case 3:return n=t.sent,t.next=6,n.json();case 6:return a=t.sent,o=a.results,t.abrupt("return",o);case 9:case"end":return t.stop()}}),t)})))()},getMoviesByQuery:function(e){var t=arguments;return Object(n["a"])(regeneratorRuntime.mark((function r(){var n,a,o,i,c;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return n=t.length>1&&void 0!==t[1]?t[1]:1,r.next=3,s("/search/movie","&query=".concat(e,"&page=").concat(n,"&include_adult=false"));case 3:return a=r.sent,r.next=6,a.json();case 6:return o=r.sent,i=o.results,c=o.total_pages,r.abrupt("return",{films:i,totalPages:c});case 10:case"end":return r.stop()}}),r)})))()},genres:function(){return Object(n["a"])(regeneratorRuntime.mark((function e(){var t,r,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,s("/genre/movie/list");case 2:return t=e.sent,e.next=5,t.json();case 5:return r=e.sent,n=r.genres,e.abrupt("return",n);case 8:case"end":return e.stop()}}),e)})))()},getDetails:function(e){return Object(n["a"])(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,s("/movie/".concat(e));case 2:return r=t.sent,t.next=5,r.json();case 5:return n=t.sent,t.abrupt("return",n);case 7:case"end":return t.stop()}}),t)})))()}};t["a"]=c},b4e4:function(e,t,r){},c1bb:function(e,t,r){"use strict";r("9395")},dab2:function(e,t,r){"use strict";r("f5a9")},e4bb:function(e,t,r){"use strict";var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"Poster"},[r("span",{staticClass:"Poster__release-year"},[e._v(" "+e._s(e.takeYear)+" ")]),r("img",{staticClass:"Poster__image",attrs:{src:e.pathToPoster,alt:"A poster to the film"}}),r("button",{staticClass:"Poster__button-like",attrs:{type:"button"},on:{click:e.favorite}},[e._v(" "+e._s(e.checkFavorite)+" ")])])},a=[],o=(r("caad"),r("d81d"),r("ac1f"),r("2532"),r("1276"),{props:{favoritesIds:Array,movie:{type:Object,required:!0}},methods:{favorite:function(){var e=this.movie.id;localStorage.getItem(e)?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(this.movie)),this.$emit("handle-favorite")}},computed:{checkFavorite:function(){var e=this.favoritesIds.map((function(e){return+e}));return e.includes(this.movie.id)?"❤️":"🖤"},pathToPoster:function(){return"https://image.tmdb.org/t/p/original".concat(this.movie.poster_path)},takeYear:function(){return+this.movie.release_date.split("-")[0]}}}),s=o,i=(r("26d2"),r("2877")),c=Object(i["a"])(s,n,a,!1,null,"bcce8470",null);t["a"]=c.exports},f16c:function(e,t,r){"use strict";r("b4e4")},f5a9:function(e,t,r){}});
//# sourceMappingURL=app.76e80ca8.js.map